{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Security Dashboard</title>
  <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
</head>
<body>
  <!-- Header -->
  <header class="dashboard-header">
    <h1>ğŸ” Security Incident Dashboard</h1>
    <div class="header-actions">
      <button id="mute-btn" class="mute-btn">ğŸ”Š Sound On</button>
      <form method="POST" action="{% url 'clear_logs' %}" class="clear-logs-form">
        {% csrf_token %}
        <button type="submit" class="clear-btn" onclick="return confirm('Are you sure you want to clear all logs?');">
          ğŸ—‘ï¸ Clear Logs
        </button>
      </form>
    </div>
  </header>

  <!-- Toasts -->
  <div id="toast-container" class="toast-container"></div>
  <audio id="alert-sound" src="{% static 'sounds/alert.wav' %}" preload="auto"></audio>

  <!-- Incident Table -->
  <section class="table-section">
    <table class="incident-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Attack Type</th>
          <th>Event Data</th>
          <th>IP Address</th>
          <th>Action Taken</th>
          <th>Timestamp</th>
          <th>Severity</th>
        </tr>
      </thead>
      <tbody>
        {% for incident in incidents %}
        <tr data-id="{{ incident.id }}">
          <td>{{ incident.id }}</td>
          <td>{{ incident.attack_type }}</td>
          <td class="event-data">{{ incident.event_data }}</td>
          <td>{{ incident.ip_address }}</td>
          <td>{{ incident.action_taken }}</td>
          <td>{{ incident.timestamp|date:"Y-m-d H:i:s" }}</td>
          <td>
            <span class="badge severity-{{ incident.severity|lower }}">
              {{ incident.severity }}
            </span>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="7" class="empty-state">âœ… No incidents detected. System is secure.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </section>

  <script src="{% static 'js/dashboard.js' %}"></script>
</body>
</html>
